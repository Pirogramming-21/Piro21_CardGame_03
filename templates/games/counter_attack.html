{% extends 'base.html' %}
{% load static %}

{% block title %}Pirogrammer Card Game{% endblock %}

{% block content %}
<link rel="stylesheet" type="text/css" href="{% static 'css/games/counter_attack.css' %}">

<div class="game-container">
    <h1 class="game-title">ğŸ—¡ï¸ ìš´ëª…ì˜ ë°˜ê²© ì‹œê°„ ğŸ›¡ï¸</h1>
    <p class="game-subtitle">ë‹¹ì‹ ì˜ ë°˜ê²©ì´ ìŠ¹ë¶€ë¥¼ ë’¤ì§‘ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤!</p>

    <div class="opponent-info">
        <h2 class="section-title">ğŸ­ ë„ì „ì</h2>
        <p class="opponent-name">{{ game.player1.nickname }}</p>
        <p class="opponent-message">"ê³¼ì—° ë‚˜ì˜ ë„ì „ì„ ë§‰ì•„ë‚¼ ìˆ˜ ìˆì„ê¹Œ?"</p>
    </div>

    <form method="post">
        {% csrf_token %}
        <div class="card-selection">
            <h2 class="section-title">âœ¨ ë‹¹ì‹ ì˜ ë°˜ê²© ì¹´ë“œë¥¼ ì„ íƒí•˜ì„¸ìš”</h2>
            <p class="card-instruction">ì´ í•œ ì¥ìœ¼ë¡œ ìŠ¹ë¶€ë¥¼ ë’¤ì§‘ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì‹ ì¤‘íˆ ê³ ë¥´ì„¸ìš”!</p>
            <div class="card-container">
                {% for num in random_numbers %}
                <div class="card" onclick="selectCard(this, '{{ num }}')">
                    {{ num }}
                </div>
                {% endfor %}
            </div>
            <input type="hidden" name="player2_card" id="id_player2_card">
        </div>

        <button type="submit" class="action-button">ìš´ëª…ì˜ ë°˜ê²©!</button>
    </form>
</div>

<script>
function selectCard(element, value) {
    const cards = document.querySelectorAll('.card');
    cards.forEach(card => card.classList.remove('selected'));
    element.classList.add('selected');
    document.getElementById('id_player2_card').value = value;
}
</script>
{% endblock %}