{% extends 'base.html' %}
{% load static %}

{% block title %}Game List{% endblock %}

{% block content %}
<link rel="stylesheet" type="text/css" href="{% static 'css/games/list.css' %}">
<div class="game-history-container">
    <h1>History List</h1>
    <h2>í˜„ì¬ í”Œë ˆì´ì–´: {{ request.user.nickname }}</h2>

    <div class="game-list">
        {% for game in games_as_player1 %}
            <div class="game-item {% if game.status == 'COMPLETED' %}
                                    {% if game.result == 'WIN' %}win
                                    {% elif game.result == 'LOSE' %}lose
                                    {% else %}draw{% endif %}
                                    {% else %}pending{% endif %}">
                <div class="players">
                    {{ game.player1.nickname }} VS {{ game.player2.nickname }}
                </div>
                <div class="status">
                    {% if game.status == 'COMPLETED' %}
                        {% if game.result == 'WIN' %}
                            ğŸ‰ ìŠ¹ë¦¬ì˜ ì¶¤ì„ ì¶”ì„¸ìš”! ğŸ•ºğŸ’ƒ
                        {% elif game.result == 'LOSE' %}
                            ğŸ˜… ë‹¤ìŒì—” ë” ì˜í•  ê±°ì˜ˆìš”!
                        {% else %}
                            ğŸ¤ ë¹„ê²¼ë„¤ìš”, ë‹¤ìŒì— ë˜ ë„ì „!
                        {% endif %}
                    {% elif game.status == 'PENDING' %}
                        {% if game.player1 == request.user %}
                            â³ ìƒëŒ€ë°©ì˜ ë°˜ê²©ì„ ê¸°ë‹¤ë¦¬ëŠ” ì¤‘...
                        {% else %}
                            ğŸ­ ë‹¹ì‹ ì˜ ë°˜ê²©ì´ í•„ìš”í•©ë‹ˆë‹¤!
                        {% endif %}
                    {% endif %}
                </div>
                <div class="actions">
                    {% if game.status == 'PENDING' %}
                        {% if game.player1 == request.user %}
                            <a href="{% url 'games:cancel' game.pk %}" class="btn">ì¼ë³´ í›„í‡´!</a>
                        {% elif game.player2 == request.user %}
                            <a href="{% url 'games:counter_attack' game.pk %}" class="btn">ë°˜ê²© ì‹œì‘!</a>
                        {% endif %}
                    {% endif %}
                </div>
                <div class="game-info">
                    <a href="#" class="btn">ê²Œì„ ì •ë³´</a>
                </div>
            </div>
        {% endfor %}

        {% for game in games_as_player2 %}
            <div class="game-item {% if game.status == 'COMPLETED' %}
                                    {% if game.result == 'WIN' %}win
                                    {% elif game.result == 'LOSE' %}lose
                                    {% else %}draw{% endif %}
                                    {% else %}pending{% endif %}">
                <div class="players">
                    {{ game.player1.nickname }} VS {{ game.player2.nickname }}
                </div>
                <div class="status">
                    {% if game.status == 'COMPLETED' %}
                        {% if game.result == 'WIN' %}
                            ğŸ‰ ìŠ¹ë¦¬ì˜ ì¶¤ì„ ì¶”ì„¸ìš”! ğŸ•ºğŸ’ƒ
                        {% elif game.result == 'LOSE' %}
                            ğŸ˜… ë‹¤ìŒì—” ë” ì˜í•  ê±°ì˜ˆìš”!
                        {% else %}
                            ğŸ¤ ë¹„ê²¼ë„¤ìš”, ë‹¤ìŒì— ë˜ ë„ì „!
                        {% endif %}
                    {% elif game.status == 'PENDING' %}
                        {% if game.player1 == request.user %}
                            â³ ìƒëŒ€ë°©ì˜ ë°˜ê²©ì„ ê¸°ë‹¤ë¦¬ëŠ” ì¤‘...
                        {% else %}
                            ğŸ­ ë‹¹ì‹ ì˜ ë°˜ê²©ì´ í•„ìš”í•©ë‹ˆë‹¤!
                        {% endif %}
                    {% endif %}
                </div>
                <div class="actions">
                    {% if game.status == 'PENDING' %}
                        {% if game.player1 == request.user %}
                            <a href="{% url 'games:cancel' game.pk %}" class="btn">ì¼ë³´ í›„í‡´!</a>
                        {% elif game.player2 == request.user %}
                            <a href="{% url 'games:counter_attack' game.pk %}" class="btn">ë°˜ê²© ì‹œì‘!</a>
                        {% endif %}
                    {% endif %}
                </div>
                <div class="game-info">
                    <a href="#" class="btn">ê²Œì„ ì •ë³´</a>
                </div>
            </div>
        {% endfor %}
    </div>
</div>
{% endblock %}